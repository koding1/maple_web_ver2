<html>
    <head>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
          google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawChart);

          function drawChart() {
            var date_data = {{rank_data|tojson}};

            var chart_table = [['직업', '일자 별 캐릭터 수']];
            for (var key in date_data) {
                    var chart_data = date_data[key];
                    for (var step = 0; step < 44; step++) {
                        if (chart_data[step]['job'] === '호영') {
                             date = key.slice(0,2) +'-' + key.slice(2,4) +'-' + key.slice(4,6)
                             chart_table.push([date, chart_data[step]['char_cnt']]);
                        }
                    }
            }
            
            console.log(chart_table)
            var data = google.visualization.arrayToDataTable(chart_table);

            var options = {
              title: '호영',
              explorer: {axis: 'horizontal'},
              chartArea:{left:70,top:"7%",width:"100%",height:"80%"},
              legend: { position: 'bottom' },
              height: "100%",
              width: "100%",
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
          }
        </script>
        <!-- <script type="text/javascript">
            google.charts.load("current", {packages:["corechart"]});
            google.charts.setOnLoadCallback(drawChart);
            function drawChart() {
                var chart_data = {{rank_data|tojson}};
                var chart_table = [["직업", "인구 수", { role: "style" } ]];
                for (var step = 0; step < 44; step++) {
                    var randomColor = Math.floor(Math.random()*16777215).toString(16);
                    chart_table.push([chart_data[step]['job'],  chart_data[step]['char_cnt'], randomColor]);
                }
                console.log(chart_table)
                var data = google.visualization.arrayToDataTable(chart_table);

                var view = new google.visualization.DataView(data);
                view.setColumns([0, 1,
                           { calc: "stringify",
                             sourceColumn: 1,
                             type: "string",
                             role: "annotation" },
                           2]);

                var options = {
                title: "직업 별 260 캐릭터 인구 수",
                chartArea:{left:"10%",top:"3%",width:"100%",height:"100%"},
                height: 1500,
                width: 600,
                bar: {groupWidth: "80%"},
                legend: { position: "none" },
                
            };
            var chart = new google.visualization.BarChart(document.getElementById("barchart_values"));
            chart.draw(view, options);
            }
        </script> -->
    </head>
    <body>
        <header class="block">
                <ul class="header-menu horizontal-list">
                    <li>
                        <a class="header-menu-tab" href="https://maple.run.goorm.io/"><span class="icon fontawesome-align-left scnd-font-color"></span>직업 랭킹</a>
                    </li>
                    <li>
                        <a class="header-menu-tab" href="https://maple.run.goorm.io/mbti"><span class="icon fontawesome-check scnd-font-color"></span>메BTI</a>
                    </li>
                </ul>
                <div class="profile-menu">
                    <input type="text" placeholder="직업 검색" class="email text-input">
                </div>
        </header>
        <div id="curve_chart" style="width: 500px; height: 500px; overflow:auto;"></div>
        <!-- <div id="barchart_values" style="width: 500px; height: 500px; overflow:auto;"></div> -->
    </body>
</html>
